<!DOCTYPE html>
<html>
<head>
	<title>Pinch</title>

	<meta charset="UTF-8">

	<link rel="stylesheet" type="text/css" href="src/style.css">
	<script type="text/javascript" src="src/jackQuery.js"></script>
	<script type="text/javascript" src="src/actions.js"></script>

	<script type="text/javascript">
		if (!localStorage.db) {
			localStorage.setItem("db", JSON.stringify({}));
		}

	</script>
</head>
<body>
	<center>
		<h1>Budget</h1>

		<input type="input" placeholder="Search..." onkeypress="fuzzy_search(self);" disabled="">

		<input class="filter" type="checkbox" value="Asset" onchange="filter();" checked> Assets
		<input class="filter" type="checkbox" value="Debt" onchange="filter();" checked> Debts
	</center>
	
	<table><tbody id="data">
		<tr>
			<th>Name</th>
			<th>Type</th>
			<th>Value</th>
		</tr>
		<tr>
			<td>New Entry: <input id="new-name" placeholder="Name..."></td>
			<td>
				<input type="radio" name="new-type" value="Asset" checked> Asset
				<input type="radio" name="new-type" value="Debt"> Debt
			</td>
			<td>
				<input type="number" id="new-value" value="10">
				<button onclick="new_record(); redraw();">Add</button>
			</td>
		</tr>
	</tbody></table>

	<script type="text/javascript">
		function redraw() {
			const table = $("#data");

			items = [...document.getElementsByClassName("entry")]
	
			for (var i = items.length - 1; i >= 0; i--) {
				items[i].remove();
			}

			const data = JSON.parse(localStorage.db);
			for (var key in data) {
				table.append(format(key, ...data[key]))
			}
		}

		redraw();
	</script>

</body>
</html>